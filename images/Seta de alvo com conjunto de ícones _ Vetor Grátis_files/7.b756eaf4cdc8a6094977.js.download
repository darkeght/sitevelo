(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{737:function(t,e,n){"use strict";n.r(e);var i=n(274),a=n(0),o=n(3),c=n(11),r=n(89),s=n(45),l=n(1),u=n(125),d=n(988),f=document.getElementById("notification-center-popover"),h={markasread:u.a.NotificationCenter.markAsRead,markasunread:u.a.NotificationCenter.markAsUnRead,delete:u.a.NotificationCenter.delete},p=function(){O.updateList(),Object(l.d)(".notification-center__list").forEach((function(t){return t.scrollTop=0}))},m=function(t){return Object(a.b)(this,void 0,void 0,(function(){var e,i,o,c=this;return Object(a.d)(this,(function(a){switch(a.label){case 0:return e=this.parent("a"),i=Object(l.c)("nav",this),e?(t.stopPropagation(),t.preventDefault(),i?[3,2]:(this.classList.add("button--loading"),o=!e.classList.contains("new"),[4,n.e(6).then(n.bind(null,1010)).then((function(t){c.insertAdjacentHTML("beforeend",t.NotificationCenterTemplates.actions({isRead:o}))}))])):[3,3];case 1:a.sent(),this.classList.remove("button--loading"),a.label=2;case 2:this.classList.toggle("active"),Object(l.d)(".notification-center__menu-actions.active").filter((function(t){return t!==c})).forEach((function(t){return t.classList.remove("active")})),a.label=3;case 3:return[2]}}))}))},v=function(t){var e=t.target;e&&(e.parents(".notification-center__menu-actions").length||Object(l.d)(".notification-center__menu-actions.active").forEach((function(t){return t.classList.remove("active")})))},b=function(){return Object(a.b)(this,void 0,void 0,(function(){var t,e,n,i,c;return Object(a.d)(this,(function(a){switch(a.label){case 0:return t=this.dataset.action,e=this.parent("a"),n='\n            <h6 class="first font-lg mg-bottom-lv2">'+Object(o.a)("Mark all as read")+'</h6>\n            <p class="font-xs">'+Object(o.a)("This action is not reversible.")+"</p>\n        ",t&&h[t]?!t.match(/markasread/i)||e?[3,2]:[4,new d.a(n).confirmation]:[3,6];case 1:return i=a.sent(),[3,3];case 2:i=!0,a.label=3;case 3:return i?[4,h[t](e?e.dataset.id||"":null)]:[3,5];case 4:c=a.sent(),t.match(/^(markasread|markasunread)$/i)&&(e?e.classList["markasread"===t?"remove":"add"]("new"):Object(l.d)(".notification-center__list a").forEach((function(t){return t.classList.remove("new")}))),e&&e.parentElement&&t.match(/^(delete)$/)&&c.success&&(e.parentElement.removeChild(e),(Object(l.d)(".notification-center .pagination__next, .notification-center .pagination__prev").length||Object(l.c)(".notification-center")&&!Object(l.d)(".notification-center__list a").length)&&window.location.reload()),this.parentNode&&this.parentNode.parentNode&&this.parentNode.parentNode.removeChild(this.parentNode),O.update(c.data.total),f.classList.contains("active")&&O.updateList(),a.label=5;case 5:return[3,7];case 6:console.error('NotificationCenterEvents / Action, "'+t+'" is not defined.'),a.label=7;case 7:return[2]}}))}))},g=function(){f&&(Object(l.a)(".notification-center__menu-actions","click",m),Object(l.a)(".notification-center__action","click",b),window.addEventListener("mouseup",v),f.addEventListener("show",p))},E=function(){f&&(Object(l.b)(".notification-center__menu-actions","click",m),Object(l.b)(".notification-center__action","click",b),window.removeEventListener("mouseup",v),f.removeEventListener("show",p))},_=n(15),O=function(t){function e(){return t.call(this)||this}return Object(a.c)(e,t),e.prototype.addEventListener=function(e,n,i){void 0===i&&(i=!0),t.prototype.addEventListener.call(this,e,n,i)},e.addEventListener=function(t,n,i){e.addEventListeners.push([t,n,i])},e.removeEventListener=function(t,n,i){e.removeEventListeners.push([t,n,i])},e.initialize=function(){return Object(a.b)(this,void 0,void 0,(function(){var t,i,r,s;return Object(a.d)(this,(function(a){switch(a.label){case 0:return t=document.getElementById("notification-center-popover"),[4,u.a.Preferences.get()];case 1:return i=a.sent(),e.instance||i.data.notificationCenterDisabled||(g(),e.instance=new e,e.dispatchUpdateCounter(),e.interval=setInterval((function(){return e.dispatchUpdateCounter()}),e.intervalTimer),e.addEventListeners.forEach((function(t){e.instance&&e.instance.addEventListener.apply(e.instance,t)})),!c.a.getItem("walkthrough-notification-tutorial")&&i.data.notificationCenterWalkthrough&&t&&(r="\n                    <p>"+Object(o.a)("Welcome to the new notification center, here you'll get alerts of the accounts or collections you follow.")+"</p>",s={".walkthrough__notification--content::before":{right:"38px"}},n.e(1).then(n.bind(null,993)).then((function(t){t.Walkthrough.add({id:"notification-tutorial",elementToWalk:".gr-auth__connected .gr-auth__popover",html:r,setStyle:s})})))),[2]}}))}))},e.destroy=function(){e.instance=null,E(),clearInterval(e.interval),e.removeEventListeners.forEach((function(t){e.instance&&e.instance.removeEventListener.apply(e.instance,t)}))},e.update=function(t){u.a.NotificationCenter.clear(),"number"==typeof t?e.updateBadge(t):(this.dispatchUpdateCounter(),clearInterval(e.interval),e.interval=setInterval((function(){return e.dispatchUpdateCounter()}),e.intervalTimer))},e.updateBadge=function(t){var e=document.getElementById("notification-center-popover"),n=Object(l.c)(".popover__trigger",e),i=Object(l.c)(".badge",e);i||((i=document.createElement("span")).classList.add("badge"),n&&n.appendChild(i)),i.innerText=t<100?t.toString():"+99",n&&0===t&&n.removeChild(i)},e.updateList=function(){n.e(6).then(n.bind(null,1010)).then((function(t){var n=Object(l.d)(".notification-center__list").map((function(t){return t.scrollTop}));u.a.NotificationCenter.get().then((function(i){var o=Object(l.c)(".notification-center__popover .popover__container");if(e.instance&&i.success&&o){e.instance.dispatchEvent(new j(i.data.total)),e.updateBadge(i.data.total);var c=!1;if(i.data.notifications&&i.data.notifications.length>=e.limitShow){var s=i.data.notifications.slice(0,e.limitShow).map((function(t){return t}));i.data.notifications=s,c=!0}o.innerHTML=t.NotificationCenterTemplates.list(Object(a.a)(Object(a.a)(Object(a.a)({},i.data),r.a),{buttonSeeAllNotifications:c}))}Object(l.d)(".notification-center__list").forEach((function(t,e){return t.scrollTop=n[e]||0}))}))}))},e.dispatchUpdateCounter=function(){u.a.NotificationCenter.get(!0).then((function(t){e.instance&&t.success&&(e.updateBadge(t.data.total),e.instance.dispatchEvent(new j(t.data.total)))}))},e.intervalTimer=6e5,e.addEventListeners=[],e.removeEventListeners=[],e.limitShow=window.innerWidth<=_.a.breakpoints.sm?3:10,e}(s.b),j=function(t){function e(e){var n=t.call(this)||this;return n.type="update",n.extra={total:e},n}return Object(a.c)(e,t),e}(s.a);n.d(e,"User",(function(){return w}));var w={Favorite:i.a};FEATURE_NOTIFICATION_CENTER&&(w.NotificationCenter=O)},988:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return c}));var i=n(0),a=n(44),o=n(3),c=function(){function e(t,n){var c=Object(i.a)({name:"dialog-"+(new Date).getTime(),show:!0,text:{cancel:Object(o.a)("Cancel"),confirm:Object(o.a)("Confirm")}},n);this.settings=Object(i.a)(Object(i.a)({},c),{html:e.template(Object(i.a)(Object(i.a)({},c),{html:t}))}),this.modalElement=a.a.print(this.settings,!0),this.modalElement.classList.add("dialog"),this.setup()}return e.prototype.setup=function(){var e=this,n=document.getElementById("dialog-confirm"),i=document.getElementById("dialog-cancel");this.confirmation=new t((function(t){e.modalElement.addEventListener("hide",(function(){return t(!1)})),n.addEventListener("click",(function(){return t(!0)})),i.addEventListener("click",(function(){return t(!1)}))})),this.confirmation.then((function(){return e.destroy()}))},e.prototype.destroy=function(){a.a.hide(),this.modalElement.parentElement&&this.modalElement.parentElement.removeChild(this.modalElement)},e.template=n(989),e}()}).call(this,n(29).Promise)},989:function(t,e,n){var i=n(14);t.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(t,e,n,i,a){t.propertyIsEnumerable;var o,c,r=t.lambda,s=t.escapeExpression;return'<div class="alignc">\n    '+(null!=(o="function"==typeof(c=null!=(c=n.html||(null!=e?e.html:e))?c:t.hooks.helperMissing)?c.call(null!=e?e:t.nullContext||{},{name:"html",hash:{},data:a,loc:{start:{line:2,column:4},end:{line:2,column:14}}}):c)?o:"")+'\n\n    <div class="row">\n        <div class="col mg-none-i">\n            <button id="dialog-confirm" type="button"\n                class="cancel button button--sm button--outline full-width nostyle"><span>'+s(r(null!=(o=null!=e?e.text:e)?o.confirm:o,e))+'</span></button>\n        </div>\n\n        <div class="col mg-none-i">\n            <button id="dialog-cancel" type="button"\n                class="confirm button button--sm button--flat full-width nostyle"><span>'+s(r(null!=(o=null!=e?e.text:e)?o.cancel:o,e))+"</span></button>\n        </div>\n    </div>\n</div>"},useData:!0})}}]);
//# sourceMappingURL=7.aa79a9383ab52951b0f171fbb7897c25.js.map