!function(e){function t(t){for(var a,c,i=t[0],l=t[1],d=t[2],s=0,f=[];s<i.length;s++)c=i[s],Object.prototype.hasOwnProperty.call(r,c)&&r[c]&&f.push(r[c][0]),r[c]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(u&&u(t);f.length;)f.shift()();return o.push.apply(o,d||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,i=1;i<n.length;i++){var l=n[i];0!==r[l]&&(a=!1)}a&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},r={19:0},o=[];function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(){return Promise.resolve()},c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/media/";var i=window.webpackJsonp=window.webpackJsonp||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var d=0;d<i.length;d++)t(i[d]);var u=l;o.push([879,0]),n()}({879:function(e,t,n){"use strict";n.r(t);var a,r,o=n(0),c=(n(56),n(3)),i=n(44),l=n(1),d=n(28),u=n(41),s=BASE_URL+"xhr/validate",f=new MutationObserver((function(e){e.forEach((function(e){if(e.addedNodes.length){var t=e.addedNodes[0].querySelectorAll('iframe[title*="recaptcha"]');t.length&&(f.disconnect(),t.forEach((function(e){setTimeout((function(){var t,n,a="invisible";"visible"==(null===(n=null===(t=e.parentNode)||void 0===t?void 0:t.parentNode)||void 0===n?void 0:n.style.visibility)&&(a="manual"),d.a.send("ga","send","event",a)}),1500)})))}}))})),h=function(e,t,n){return Object(o.b)(this,void 0,void 0,(function(){var i,l,d,f,h;return Object(o.d)(this,(function(o){switch(o.label){case 0:if(t.preventDefault(),t.stopPropagation(),(r=n).button=e,i=e.getAttribute("href"),(a=document.createElement("a")).href=i,"External"===r.fileLicense)return r.callbackEvents&&r.callbackEvents(),window.open(a.href,"_blank"),[2];e.classList.add("button--loading-download"),p(!0),e.classList.contains("button--icon")||((l=document.createElement("span")).className="text-downloading",l.innerHTML=""+Object(c.a)("Downloading..."),e.appendChild(l)),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,Object(u.b)(s,{withCredentials:!0,headers:{"X-Requested-With":"XMLHttpRequest"}})];case 2:return d=o.sent(),f=d.getPathValue("isManual"),d.getPathValue("gi")||!f?(w(),[2]):(f&&b(e),[3,4]);case 3:return h=o.sent(),console.error("Error validate download ",h),[3,4];case 4:return[2]}}))}))},b=function(e){var t,n,a=e.dataset.captcha?e.dataset.captcha:"free",o=Object(l.c)("#captcha-download-"+a),c=r.recaptcha.widgets[r.recaptcha.nameHandler];if(o&&(c||"0"==c)){grecaptcha.reset(c);var i=o.cloneNode(!1);a=a+"-"+(new Date).getTime(),i.id="captcha-download-"+a,null===(t=o.parentNode)||void 0===t||t.insertBefore(i,o.nextSibling),null===(n=o.parentNode)||void 0===n||n.removeChild(o),o=Object(l.c)("#captcha-download-"+a),c=null}e.dataset.captcha=a,r.uniqCaptcha=a,r.captchaElement=o||void 0,o&&!c&&"0"!=c&&(c=r.recaptcha.render(o,v,!1)),g(),grecaptcha.execute(c)},p=function(e){if(r.disableOtherDownloads){var t=Object(l.d)(r.disableOtherDownloads);t.length>0&&t.forEach((function(t){t!==r.button&&t.classList[e?"add":"remove"]("disabled")}))}},v=function(e){try{w(e),grecaptcha.reset()}catch(e){console.error("Error submit captcha download",e),grecaptcha.reset()}},w=function(e){p(!1),r.callbackEvents&&r.callbackEvents(),a&&(a.href=a.href+(e?"?token="+e:""),document.body.appendChild(a),O(!0),a.click(),a.remove())},O=function(e){var t,n,a,o=Object(l.c)(".text-downloading",r.button);null===(n=null===(t=o)||void 0===t?void 0:t.parentNode)||void 0===n||n.removeChild(o),null===(a=r.button)||void 0===a||a.classList.remove("button--loading-download"),e&&Object(l.c)("#modal-download.active")&&i.a.hide()},g=function(){var e=document.body;f.observe(e,{childList:!0,attributes:!1,attributeOldValue:!1,characterData:!1,characterDataOldValue:!1,subtree:!1})};document.querySelector("#main .user.user--downloads")&&FEATURE_SAFE_DOWNLOAD&&function(){Object(o.b)(this,void 0,void 0,(function(){var e=this;return Object(o.d)(this,(function(t){return Object(l.d)(".download-button").forEach((function(t){t.addEventListener("click",(function(n){return Object(o.b)(e,void 0,void 0,(function(){var e;return Object(o.d)(this,(function(a){return e={disableOtherDownloads:".download-button",fileLicense:t.dataset.license?t.dataset.license:"",recaptcha:RecaptchaDownloads},h(t,n,e),[2]}))}))}))})),[2]}))}))}()}});
//# sourceMappingURL=user_downloads.87a34d7cfd1de6fcb4e82357176f3adc.js.map